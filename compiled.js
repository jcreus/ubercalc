define("easytab",[],function(){function e(e){return Array.prototype.slice.call(e)}return window.ontouchmove=function(e){return e.preventDefault(),!1},function(n){function o(t){var n=r+t;if(n>=i.querySelectorAll(".tabs li").length||n<0)return;var s=i.querySelector(".tabs li:nth-child("+(n+1)+")");e(i.querySelectorAll(".tabs li")).map(function(e){e.className=""}),s.className="active",e(i.querySelectorAll("section")).map(function(e){e.style.marginLeft=parseFloat(e.style.marginLeft)-t*100+"%",e.style.opacity=.5});var o=s.getAttribute("data-id");document.getElementById(o).style.opacity=1,r=n}var r=0,i=document.getElementById(n),s;i.ontouchstart=function(e){s=e.changedTouches[0].pageX},i.ontouchend=function(e){var t=e.changedTouches[0].pageX-s;Math.abs(t)>innerWidth/3&&(t>0?o(-1):o(1)),s=undefined},e(i.querySelectorAll(".tabs li")).map(function(e,t){t==0&&(e.className="active"),e.addEventListener("click",function(){var e=t-r;o(e)})}),e(i.querySelectorAll(".contents section")).map(function(e,t){e.style.marginLeft=100*t+"%"})}}),define("j3calc/functions",[],function(){function r(){var t=e.session.memory.list,n=0;return t.map(function(e){n+=e}),n/t.length}var e={getOperatorData:function(e){return{associativity:t[e],precedence:n[e]}},getFunction:function(e){var t=i[e];return t?{fn:t,length:t.length}:!1}},t={"+":0,"-":0,"*":0,"/":0,"^":1},n={"+":2,"-":2,"*":3,"/":3,"^":4},i={"*":function(e,t){return e*t},"/":function(e,t){return e/t},"+":function(e,t){return e+t},"-":function(e,t){return e-t},"^":function(e,t){return Math.pow(e,t)},min:function(e,t){return Math.min(e,t)},max:function(e,t){return Math.max(e,t)},sqrt:function(e){return Math.sqrt(e)},xrt:function(e,t){return Math.pow(t,1/e)},sin:function(e){return Math.sin(e)},cos:function(e){return Math.cos(e)},tan:function(e){return Math.tan(e)},arcsin:function(e){return Math.asin(e)},arccos:function(e){return Math.acos(e)},arctan:function(e){return Math.atan(e)},ln:function(e){return Math.log(e)},log:function(e,t){return Math.log(t)/Math.log(e)},prv:function(t){var n=e.session.getPrevious();return n[n.length-1-t]||0},avg:r,sd:function(){var t=e.session.memory.list,n=0;return t.map(function(e){n+=e*e}),n/=t.length,n-=Math.pow(r(),2),Math.sqrt(n)},n:function(){return e.session.memory.list.length}};return e}),define("j3calc/infix",["./functions"],function(e){function i(e){return e=="("||e==")"}function s(e){return["*","/","+","-","^"].indexOf(e)!=-1}function o(e){return e==","}function u(e){return!isNaN(e)}function a(e){return!u(e)&&!s(e)&&!o(e)&&!i(e)}function f(e){var t=e.filter(function(e){return e!==""});return t[t.length-1]}function l(e){var i=[""],s="+";return e=e.replace("pi",Math.PI+""),e=e.replace("e",Math.E+""),e.split("").map(function(e){if(r.indexOf(e)==-1)if(t.indexOf(e)!=-1){var o=f(i);e=="-"&&i.length==1&&i[0]==""?i[0]+="-":e=="-"&&!u(o)?s="-":(i.push(e),i.push(""))}else n.indexOf(e)!=-1?i[i.length-1]+=e:isNaN(e)?!i[i.length-1]||isNaN(i[i.length-1])?i[i.length-1]+=e:i.push(""+e):(!isNaN(f(i))||i[i.length-1]=="-"?i[i.length-1]+=e:i.push(s+e),s="+")}),i.filter(Boolean)}function c(t){var n=[],r=[];for(var f=0;f<t.length;f++){var l=t[f];if(u(l))n.push(parseFloat(l));else if(a(l))r.push(l);else if(o(l)){var c=r.length,h=!0;while(c--){var p=r[c];if(p=="("){h=!1;break}n.push(r.pop())}if(h)return{status:"error",value:"Parenthesis mismatch"}}else if(s(l)){var c=r.length;while(c>0){var d=r[c-1];if(!s(d))break;var v=e.getOperatorData(l),m=e.getOperatorData(d);(v.associativity==0&&v.precedence<=m.precedence||v.precedence<m.precedence)&&n.push(r.pop()),c--}r.push(l)}else if(l=="(")r.push(l);else if(l==")"){var c=r.length,h=!0;while(c--){var p=r[c];if(p=="("){h=!1;break}n.push(r.pop())}if(h)return{status:"error",value:"Parenthesis mismatch"};r.pop(),r.length>0&&a(r[r.length-1])&&n.push(r.pop())}}var g=r.length;while(g--){var y=r[g];if(i(y))return{status:"error",value:"Parenthesis mismatch"};n.push(y)}return{status:"ok",value:n}}var t=["*","/","+","-","^","(",")",","],n=["."],r=[" "];return{toPostfix:function(e){var t=l(e);return c(t)}}}),define("j3calc/j3calc",["./infix","./functions"],function(e,t){function n(e,n){t.session=n;var r=[];for(var i=0;i<e.length;i++){var s=e[i];if(!isNaN(s))r.push(s);else{var o=t.getFunction(s);if(!o)return{status:"error",value:"Unknown command '"+s+"'"};if(o.length>r.length)return{status:"error",value:"Not enough parameters"};var u=r.splice(r.length-o.length,r.length),a=o.fn.apply({},u);r.push(a)}}return r.length>1?{status:"error",value:"Too many values in input"}:{status:"ok",value:r[0]}}var r=function(e){this.get=function(t,n){var r=JSON.parse(localStorage.getItem(e+"-"+t));return r||n},this.put=function(t,n){localStorage.setItem(e+"-"+t,JSON.stringify(n))}},i=function(e){this.list=e.get("memory",[]),this.add=function(e){this.list.push(e),this.update()},this.rm=function(e){this.list.pop(),this.update()},this.update=function(){e.put("memory",this.list)},this.clear=function(){this.list=[],e.put("memory",[])}};return{Session:function(t){var s=new r(t);this.memory=new i(s),this.getPrevious=function(){return s.get("results",[])},this.add=function(t){var r=e.toPostfix(t);if(r.status=="ok"){var i=n(r.value,this);if(i.status=="ok"&&!isNaN(i.value)){var o=i.value,u=s.get("results",[]);return u.push(o),s.put("results",u),o}return"<error: "+i.value+">"}return"<error: "+r.value+">"}},eval:n}}),define("toast",[],function(){return{Toast:function(e,t){var n=document.createElement("div");n.className="toast",n.innerHTML=e,document.body.appendChild(n),n.style.marginLeft=-n.offsetWidth/2+"px",n.style.opacity=1,setTimeout(function(){n.style.opacity=0},t||2e3)}}}),requirejs.config({waitSeconds:60}),require(["easytab","j3calc/j3calc","toast"],function(e,t,n){function s(e){return Array.prototype.slice.call(e)}function u(e,t,n,r){this.toadd=t||e,this.label=e,this.color=n||"#f3f3f3",this.colspan=r||1}function a(e){this.id=e.id||"",this.label=e.label||"",this.toadd=e.toadd||"",this.color=e.color||"#f3f3f3",this.colspan=e.colspan||1,this.fn=e.fn||function(){},this.dropdown=e.dropdown||undefined}function c(e){var t=e.querySelector("input"),n=t.value,r=o.add(n);return t.value=r,e.setAttribute("data-reset","true"),s(document.querySelectorAll("#prev .other")).map(function(e){var t=o.getPrevious();e.innerHTML=t[t.length-1]}),r}function h(e){var t=c(e);o.memory.add(t),n.Toast("Added to memory")}function p(e){o.memory.rm(),n.Toast("Removed last memory item")}function d(e){o.memory.clear(),n.Toast("Memory cleared")}function v(e,t){e.getAttribute("data-reset")=="true"&&(e.querySelector("input").value=""),e.querySelector("input").value+=t,e.setAttribute("data-reset","false")}function m(e){var t=e.dropdown;return typeof t=="function"&&(t=t()),t}function g(){var e=document.querySelector("#calctabs .tabs").offsetHeight;s(document.querySelectorAll(".calculator")).map(function(t){var n=parseFloat(window.getComputedStyle(t).borderSpacing),r=t.querySelector("thead").offsetHeight,i=s(t.querySelectorAll("tbody button, tbody select")),o=t.querySelectorAll("tr").length-1;i.map(function(t){var i=(innerHeight-r-e-10-n*o)/o;t.tagName.toLowerCase()=="select",t.style.height=i+"px"})})}var r="http://localhost:8000/manifest.json";if(navigator.mozApps!=undefined&&localStorage.notNow!=="yes"){var i=navigator.mozApps.checkInstalled(r);i.onsuccess=function(e){console.log(i.result),i.result||n.Toast('<span style="text-decoration:underline;" onclick="navigator.mozApps.install(\''+r+'\')">Install Ubercalc as a Mozilla Web App</span> · <span style="text-decoration:underline;" onclick="localStorage.notNow=\'yes\'";">Not now</span>',5e3)}}Function.prototype.bind=function(e){var t=this;return function(){return t.apply(e,arguments)}},new e("calctabs");var o=new t.Session("ubercalc"),f=new a({id:"prev",label:"Prev",toadd:"prv(0)",color:"#BBD4E9",dropdown:function(){var e=o.getPrevious(),t=e.length,n=e.map(function(e,n){return[e,"prv("+(t-1-n)+")"]});return n.length!=0?n:[["0","0"]]}}),l={advanced1:[[new u(",",",","#BCCCD9"),new u("ln","ln(","#BCCCD9"),new u("log<sub>x</sub>(y)","log(","#BCCCD9"),new u("10<sup>x</sup>","10^","#BCCCD9")],[new u("x<sup>y</sup>","^","#BCCCD9"),new u("x<sup>2</sup>","^2","#BCCCD9"),new u("√","sqrt(","#BCCCD9"),new u("<sup>x</sup>√","xrt(","#BCCCD9")],[new a({label:"sin",toadd:"sin(",color:"#BCCCD9",dropdown:[["arcsin","arcsin("]]}),new a({label:"cos",toadd:"cos(",color:"#BCCCD9",dropdown:[["arccos","arccos("]]}),new a({label:"tan",toadd:"tan(",color:"#BCCCD9",dropdown:[["arctan","arctan("]]}),new u("x<sup>-1</sup>","^-1","#BCCCD9")]],basic:[[new u("7"),new u("8"),new u("9"),new u("+","+","#BBD4E9")],[new u("4"),new u("5"),new u("6"),new u("−","-","#BBD4E9")],[new u("1"),new u("2"),new u("3"),new u("×","*","#BBD4E9")],[new u("0"),new u("("),new u(")"),new u("÷","/","#BBD4E9")],[f,new u(".",".","#BBD4E9"),new a({label:"=",color:"#99cc00",colspan:2,fn:c})]],basic2:[[new u("7"),new u("8"),new u("9"),new u("+","+","#BBD4E9")],[new u("4"),new u("5"),new u("6"),new u("−","-","#BBD4E9")],[new u("1"),new u("2"),new u("3"),new u("×","*","#BBD4E9")],[new u("0"),new u("("),new u(")"),new u("÷","/","#BBD4E9")],[f,new u(".",".","#BBD4E9"),new a({label:"π",toadd:"pi",color:"#BBD4E9",dropdown:[["e","e"],["c","299792458"]]}),new a({label:"=",color:"#99cc00",fn:c})]],statadvanced:[[new a({label:"Clear mem.",toadd:"clr()",color:"#BCCCD9",fn:d}),new a({label:'<span style="text-decoration:overline;">x</span>',toadd:"avg()",color:"#BCCCD9",dropdown:[["σ","sd()"]]}),new u("n","n()","#BCCCD9"),new a({label:"M-",color:"#BCCCD9",colspan:1,fn:p})]],statbasic:[[new u("7"),new u("8"),new u("9"),new u("+","+","#BBD4E9")],[new u("4"),new u("5"),new u("6"),new u("−","-","#BBD4E9")],[new u("1"),new u("2"),new u("3"),new u("×","*","#BBD4E9")],[new u("0"),new u("("),new u(")"),new u("÷","/","#BBD4E9")],[f,new u(".",".","#BBD4E9"),new a({label:"=",color:"#99cc00",colspan:1,fn:c}),new a({label:"M+",color:"#99cc00",colspan:1,fn:h})]]};s(document.querySelectorAll(".calculator")).map(function(e){var t,n=e.querySelector(".back");n.addEventListener("mouseup",function(){var t=e.querySelector("input").value;e.querySelector("input").value=t.substr(0,t.length-1)}),n.addEventListener("touchstart",function(n){t=setTimeout(function(){e.querySelector("input").value=""},500);var r=e.querySelector("input").value;return e.querySelector("input").value=r.substr(0,r.length-1),n.preventDefault(),!1}),n.addEventListener("touchend",function(e){return e.preventDefault(),clearInterval(t),!1}),e.querySelector("input").ontouchstart=function(e){return e.preventDefault(),!1},e.querySelector("input").onkeypress=function(t){(t.keyCode==13||t.which==13)&&c(e)},s(e.querySelectorAll("tbody")).map(function(t){var n=l[t.getAttribute("data-section")];for(var r=0;r<n.length;r++){var i=n[r],s=document.createElement("tr");for(var o=0;o<i.length;o++){var u=document.createElement("td");u.setAttribute("colspan",i[o].colspan);var a=document.createElement("button");a.style.background=i[o].color,i[o].id&&a.setAttribute("id",i[o].id),a.innerHTML=i[o].label;var f=m(i[o]);if(f!==undefined){f.length>0&&(a.innerHTML='<span class="other">'+f[f.length-1][0]+'</span><span class="main">'+a.innerHTML+"</span>");var c={},h,p=function(){var e=this.el.getAttribute("date-time"),t=(new Date).getTime();if(e!=undefined&&t-parseFloat(e)<10)return;this.el.setAttribute("date-time",t),tim=setTimeout(function(){var e=m(this.elements[this.cell]);if(e.length==1)v(this.calc,e[0][1]);else{var t=document.createElement("ul"),n=document.createElement("div");t.className="popup",this.calc.appendChild(t);for(var r=Math.max(0,e.length-5);r<e.length;r++){var i=document.createElement("li");i.innerHTML=e[r][0],i.setAttribute("data-add",e[r][1]),i.addEventListener("click",function(){v(this.calc,this.li.getAttribute("data-add")),t.parentNode.removeChild(t),document.body.removeChild(this.overlay)}.bind({calc:this.calc,li:i,overlay:n})),t.appendChild(i)}var s=t.clientHeight;t.style.top=this.el.offsetTop-s+"px",t.style.left=this.el.offsetLeft+"px",t.style.width=this.el.offsetWidth-2+"px",t.style.zIndex=1e4,n.style.zIndex=1e3,n.className="overlay",n.addEventListener("click",function(e){this.parentNode.removeChild(this),document.body.removeChild(e.target)}.bind(t)),document.body.appendChild(n)}}.bind(this),400)},d=function(){var e=(new Date).getTime()-parseFloat(this.el.getAttribute("date-time"));clearTimeout(tim),e<400&&e>10&&v(this.calc,this.elements[this.cell].toadd)},c={elements:i,cell:o,calc:e,el:a};a.addEventListener("mousedown",p.bind(c)),a.addEventListener("touchstart",p.bind(c)),a.addEventListener("mouseup",d.bind(c)),a.addEventListener("touchend",d.bind(c))}else i[o].fn?a.addEventListener("click",function(){this.elements[this.cell].fn(this.calc)}.bind({elements:i,cell:o,calc:e})):a.addEventListener("click",function(){v(this.calc,this.elements[this.cell].toadd)}.bind({elements:i,cell:o,calc:e}));u.appendChild(a),s.appendChild(u)}t.appendChild(s)}})}),window.addEventListener("resize",g),g()}),define("ubercalc",function(){});